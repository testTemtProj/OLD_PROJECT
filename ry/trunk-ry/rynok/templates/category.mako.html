<%! from rynok.lib import viewhelpers as vh %>
<%inherit file='/base/index.html' />
<%def name="title()">${vh.meta('title', c.category)}</%def>
<%def name="keywords()">${vh.meta('keywords', c.category)}</%def>
<%def name="description()">${vh.meta('description', c.category)}</%def>

<div id="ContentFlow"><div class="flow"></div></div>

		<!--[if lte IE 7]>
		<table class="ie-wrapper">
			<tr>
				<td class="col">
		<![endif]-->
        <div id="categories-list">
            <div id="wrapper">
                ${vh.cat_breadcrumbs(c.category)}
                <div id="content">
                    <!-- категории -->
                    ${categories(c.cats)}
                    <div class="clr"></div>
                </div>
            </div>
        </div>
		<!--[if lte IE 7]>
				</td>
				<td class="col sidebar">
		<![endif]-->
    
		<div id="sidebar">
            ${vh.banner_block()}
			<div class="clr"></div>
		    ${vh.vendors()}
            <div class="clr"></div>
		</div>
<%def name="categories(cats)">
<%
    remainder = len(cats)%3
    per_c = len(cats)/3

    begin = 0

    for i in range(1, 4):
        per_column = per_c

        if remainder > 0:
            per_column += 1
            remainder -= 1

        context.write('<ul class="category-list all" style="float:left; display: inline; width: 33%; clear: none !important;">')

        to = begin + per_column

        for cat in cats[begin:to]:
            context.write(vh.categories(cat["ID"]))

        begin = to

        context.write('</ul>')
%>
</%def>
